import{F as c,r as e,b as y,I as d,c as F,B as i,m,d as p,e as h,T as D,f as A}from"./vendor.83739eef.js";import{B}from"./BasicLayoutCard.312e37e8.js";function C(u,t){if(typeof t=="string")return u.host.includes(t);{const{type:r,url:n}=t;switch(r){case"domain":return u.host.includes(n);case"link":return u.href===n;case"linkPrefix":return u.href.startsWith(n);case"regex":return new RegExp(n).test(u.href)}}}const x={domain:"\u57DF\u540D",link:"\u94FE\u63A5",linkPrefix:"\u94FE\u63A5\u524D\u7F00",regex:"\u6B63\u5219\u8868\u8FBE\u5F0F"},a=window["com.rxliuli.UnblockWebRestrictions.configBlockApi"];function f(u,...t){let r=new Set(t);return Object.entries(u).reduce((n,[l,o])=>(r.has(l)&&Reflect.set(n,l,o),n),{})}const w=u=>{const[t]=c.useForm();function r(){t.resetFields()}async function n(l){console.log("values: ",l);const o=l;a.add(f(o,"type","url")),m.success("\u6DFB\u52A0\u6210\u529F"),u.onReload(),r()}return e.exports.createElement(c,{form:t,onFinish:n,onReset:r,layout:"vertical"},e.exports.createElement(c.Item,{label:"\u5339\u914D\u6A21\u5F0F",name:"type",rules:[{required:!0,message:"\u5339\u914D\u6A21\u5F0F\u6CA1\u6709\u9009\u62E9"}]},e.exports.createElement(y,{options:Object.entries(x).map(([l,o])=>({label:o,value:l}))})),e.exports.createElement(c.Item,{label:"\u5339\u914D\u503C",name:"url",rules:[{required:!0,message:"\u5339\u914D\u503C\u4E0D\u80FD\u4E3A\u7A7A"}]},e.exports.createElement(d,null)),e.exports.createElement(c.Item,{label:"\u6D4B\u8BD5\u9700\u8981\u5339\u914D\u7684 URL",name:"tempUrl",rules:[{type:"url",message:"\u6D4B\u8BD5\u9700\u8981\u5339\u914D\u7684 URL \u5FC5\u987B\u662F\u4E2A URL \u554A\u5582 (#`O\u2032)"},l=>({async validator(o,E){const s=l.getFieldsValue();if(!s.tempUrl)throw new Error("\u6D4B\u8BD5\u9700\u8981\u5339\u914D\u7684 URL \u4E0D\u80FD\u4E3A\u7A7A");if(!C(new URL(s.tempUrl),s))throw new Error("\u6D4B\u8BD5\u9700\u8981\u5339\u914D\u7684 URL \u672A\u80FD\u5339\u914D\uFF01")}})],dependencies:["type","url"]},e.exports.createElement(d,null)),e.exports.createElement(c.Item,null,e.exports.createElement(F,null,e.exports.createElement(i,{type:"primary",htmlType:"submit"},"\u63D0\u4EA4"),e.exports.createElement(i,{htmlType:"reset"},"\u6E05\u7A7A"))))},R=u=>e.exports.createElement("div",null,e.exports.createElement("h2",null,"\u672C\u5730\u5C4F\u853D\u914D\u7F6E\u5217\u8868"),e.exports.createElement(p,{dataSource:u.list,renderItem:(t,r)=>e.exports.createElement(p.Item,{key:r,actions:[e.exports.createElement(h,{checked:t.enable,onChange:()=>u.onSwitch(t)}),e.exports.createElement(i,{type:"danger",onClick:()=>u.onRemove(t)},"\u5220\u9664")]},e.exports.createElement(p.Item.Meta,{title:e.exports.createElement("div",null,e.exports.createElement(D,null,x[t.type]),e.exports.createElement("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.url},t.type==="regex"?t.url:e.exports.createElement("a",{href:(t.type==="domain"?"https://":"")+t.url},t.url))),description:e.exports.createElement("div",null,t.enable)}))})),k=u=>e.exports.createElement(A,{style:{width:"100%"},title:u.title,extra:e.exports.createElement(i,{type:"primary",href:u.href},"\u53BB\u5B89\u88C5\u811A\u672C")}),b=()=>{const[u,t]=e.exports.useState(()=>a.list());function r(){const s=a.list();t(s),console.log("reload: ",s)}function n(){a.clear(),r(),m.success("\u6E05\u7A7A\u6210\u529F")}async function l(){await a.update(),r(),m.success("\u66F4\u65B0\u6210\u529F")}function o(s){console.log("remove key: ",s.key),a.remove(s.key),r(),m.success("\u5220\u9664\u6210\u529F")}function E(s){console.log("handleSwitch: ",s),a.switch(s.key),r()}return e.exports.createElement(B,{title:"\u914D\u7F6E\u9875",extra:e.exports.createElement("div",null,e.exports.createElement(i,{type:"primary",onClick:n,style:{marginRight:8}},"\u6E05\u7A7A"),e.exports.createElement(i,{type:"primary",onClick:l},"\u66F4\u65B0"))},e.exports.createElement(w,{onReload:r}),e.exports.createElement(R,{list:u,onRemove:o,onSwitch:E}))},U=()=>a?e.exports.createElement(b,null):e.exports.createElement(k,{title:"\u60A8\u8FD8\u672A\u5B89\u88C5\u89E3\u9664\u7F51\u9875\u7981\u6B62\u590D\u5236/\u7C98\u8D34\u7684\u811A\u672C",href:"https://greasyfork.org/zh-CN/scripts/391193"});export{U as default};
